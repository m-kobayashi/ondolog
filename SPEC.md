# ã‚ªãƒ³ãƒ‰ãƒ­ã‚° é–‹ç™ºæŒ‡ç¤ºæ›¸

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

**ã‚µãƒ¼ãƒ“ã‚¹å**: ã‚ªãƒ³ãƒ‰ãƒ­ã‚°ï¼ˆOndoLogï¼‰
**æ¦‚è¦**: HACCPå¯¾å¿œã®æ¸©åº¦è¨˜éŒ²ç®¡ç†ã‚¢ãƒ—ãƒª
**ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ**: é£²é£Ÿåº—ã€é£Ÿå“è£½é€ æ¥­ã€çµ¦é£Ÿæ–½è¨­
**ã‚³ãƒ³ã‚»ãƒ—ãƒˆ**: ã€Œ1æ—¥30ç§’ã§æ¸©åº¦è¨˜éŒ²ã€HACCPã‚¯ãƒªã‚¢ã€

---

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
- **Flutter** (iOS/Android ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ )
- Dart 3.x
- çŠ¶æ…‹ç®¡ç†: Riverpod
- ãƒ­ãƒ¼ã‚«ãƒ«DB: Hiveï¼ˆã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œï¼‰

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
- **Cloudflare Workers** (TypeScript)
- **Cloudflare D1** (SQLite)
- **Cloudflare KV** (ã‚­ãƒ£ãƒƒã‚·ãƒ¥)

### èªè¨¼
- **Firebase Authentication**
  - ãƒ¡ãƒ¼ãƒ«/ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰
  - Google Sign-In

### èª²é‡‘ï¼ˆMVPå¾Œï¼‰
- **RevenueCat**

---

## DBè¨­è¨ˆ (Cloudflare D1)

### users ãƒ†ãƒ¼ãƒ–ãƒ«
```sql
CREATE TABLE users (
  id TEXT PRIMARY KEY,
  firebase_uid TEXT UNIQUE NOT NULL,
  email TEXT NOT NULL,
  display_name TEXT,
  business_name TEXT,
  business_type TEXT, -- 'restaurant', 'factory', 'cafeteria', 'other'
  plan TEXT DEFAULT 'free',
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
);
```

### locations ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆåº—èˆ—ï¼‰
```sql
CREATE TABLE locations (
  id TEXT PRIMARY KEY,
  user_id TEXT NOT NULL,
  name TEXT NOT NULL,
  address TEXT,
  is_active INTEGER DEFAULT 1,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (user_id) REFERENCES users(id)
);
```

### checkpoints ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆè¨˜éŒ²ãƒã‚¤ãƒ³ãƒˆï¼‰
```sql
CREATE TABLE checkpoints (
  id TEXT PRIMARY KEY,
  location_id TEXT NOT NULL,
  name TEXT NOT NULL, -- 'å†·è”µåº«A', 'å†·å‡åº«', 'èª¿ç†å ´' ãªã©
  checkpoint_type TEXT NOT NULL, -- 'refrigerator', 'freezer', 'cooking_area', 'storage', 'other'
  min_temp REAL, -- åŸºæº–ä¸‹é™æ¸©åº¦
  max_temp REAL, -- åŸºæº–ä¸Šé™æ¸©åº¦
  sort_order INTEGER DEFAULT 0,
  is_active INTEGER DEFAULT 1,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (location_id) REFERENCES locations(id)
);
```

### records ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆæ¸©åº¦è¨˜éŒ²ï¼‰
```sql
CREATE TABLE records (
  id TEXT PRIMARY KEY,
  checkpoint_id TEXT NOT NULL,
  temperature REAL NOT NULL,
  recorded_at DATETIME NOT NULL,
  recorded_by TEXT, -- è¨˜éŒ²è€…åï¼ˆå°†æ¥ç”¨ï¼‰
  is_abnormal INTEGER DEFAULT 0, -- åŸºæº–å¤–ãƒ•ãƒ©ã‚°
  abnormal_action TEXT, -- ç•°å¸¸æ™‚å¯¾å¿œãƒ¡ãƒ¢
  notes TEXT,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (checkpoint_id) REFERENCES checkpoints(id)
);
```

### è¨˜éŒ²ãƒã‚¤ãƒ³ãƒˆã‚¿ã‚¤ãƒ— (checkpoint_type)
| ã‚¿ã‚¤ãƒ— | è¡¨ç¤ºå | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆåŸºæº–æ¸©åº¦ |
|--------|--------|-------------------|
| refrigerator | å†·è”µåº« | 0ã€œ10â„ƒ |
| freezer | å†·å‡åº« | -25ã€œ-15â„ƒ |
| cooking_area | èª¿ç†å ´ | 15ã€œ25â„ƒ |
| storage | ä¿ç®¡åº« | 10ã€œ20â„ƒ |
| other | ãã®ä»– | è¨­å®šãªã— |

---

## APIè¨­è¨ˆ (Cloudflare Workers)

### ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆä¸€è¦§

| Method | Path | èª¬æ˜ |
|--------|------|------|
| POST | `/api/auth/register` | ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ² |
| GET | `/api/users/me` | ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±å–å¾— |
| PUT | `/api/users/me` | ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±æ›´æ–° |
| GET | `/api/locations` | åº—èˆ—ä¸€è¦§å–å¾— |
| POST | `/api/locations` | åº—èˆ—ç™»éŒ² |
| PUT | `/api/locations/:id` | åº—èˆ—æ›´æ–° |
| DELETE | `/api/locations/:id` | åº—èˆ—å‰Šé™¤ |
| GET | `/api/locations/:id/checkpoints` | è¨˜éŒ²ãƒã‚¤ãƒ³ãƒˆä¸€è¦§ |
| POST | `/api/checkpoints` | è¨˜éŒ²ãƒã‚¤ãƒ³ãƒˆç™»éŒ² |
| PUT | `/api/checkpoints/:id` | è¨˜éŒ²ãƒã‚¤ãƒ³ãƒˆæ›´æ–° |
| DELETE | `/api/checkpoints/:id` | è¨˜éŒ²ãƒã‚¤ãƒ³ãƒˆå‰Šé™¤ |
| GET | `/api/records` | è¨˜éŒ²ä¸€è¦§å–å¾— |
| POST | `/api/records` | æ¸©åº¦è¨˜éŒ²ç™»éŒ² |
| POST | `/api/records/bulk` | ä¸€æ‹¬æ¸©åº¦è¨˜éŒ² |
| GET | `/api/records/daily/:date` | æ—¥åˆ¥è¨˜éŒ²å–å¾— |
| GET | `/api/stats/weekly` | é€±é–“çµ±è¨ˆ |

### ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹

#### POST /api/records/bulkï¼ˆä¸€æ‹¬è¨˜éŒ²ï¼‰
```json
// Request
{
  "records": [
    {
      "checkpoint_id": "cp_xxx1",
      "temperature": 5.2,
      "recorded_at": "2025-01-15T09:00:00Z"
    },
    {
      "checkpoint_id": "cp_xxx2",
      "temperature": -18.5,
      "recorded_at": "2025-01-15T09:00:00Z"
    },
    {
      "checkpoint_id": "cp_xxx3",
      "temperature": 22.0,
      "recorded_at": "2025-01-15T09:00:00Z"
    }
  ]
}

// Response
{
  "success": true,
  "data": {
    "recorded_count": 3,
    "abnormal_count": 0,
    "records": [
      { "id": "rec_xxx1", "is_abnormal": false },
      { "id": "rec_xxx2", "is_abnormal": false },
      { "id": "rec_xxx3", "is_abnormal": false }
    ]
  }
}
```

### èªè¨¼
- Firebase ID Token ã‚’ Authorization ãƒ˜ãƒƒãƒ€ãƒ¼ã§é€ä¿¡
- `Authorization: Bearer <firebase_id_token>`

---

## ç”»é¢è¨­è¨ˆ

### 1. ãƒ›ãƒ¼ãƒ ç”»é¢ï¼ˆä»Šæ—¥ã®è¨˜éŒ²çŠ¶æ³ï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ã‚ªãƒ³ãƒ‰ãƒ­ã‚°          [è¨­å®š]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“ æœ¬åº—                     â”‚
â”‚ 2025å¹´1æœˆ15æ—¥ï¼ˆæ°´ï¼‰         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                             â”‚
â”‚ æœã®è¨˜éŒ² âœ“ å®Œäº†             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ§Š å†·è”µåº«A      5.2â„ƒ   â”‚ â”‚
â”‚ â”‚ ğŸ§Š å†·å‡åº«     -18.5â„ƒ   â”‚ â”‚
â”‚ â”‚ ğŸ³ èª¿ç†å ´     22.0â„ƒ    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                             â”‚
â”‚ å¤•ã®è¨˜éŒ² â³ æœªè¨˜éŒ²          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ§Š å†·è”µåº«A      --.-â„ƒ   â”‚ â”‚
â”‚ â”‚ ğŸ§Š å†·å‡åº«      --.-â„ƒ   â”‚ â”‚
â”‚ â”‚ ğŸ³ èª¿ç†å ´      --.-â„ƒ   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                             â”‚
â”‚      [ ä»Šã™ãè¨˜éŒ²ã™ã‚‹ ]     â”‚
â”‚                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ãƒ›ãƒ¼ãƒ ] [ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼] [è¨­å®š]â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. æ¸©åº¦å…¥åŠ›ç”»é¢
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† æ¸©åº¦è¨˜éŒ²                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2025å¹´1æœˆ15æ—¥ 17:30         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                             â”‚
â”‚ ğŸ§Š å†·è”µåº«A                  â”‚
â”‚ åŸºæº–: 0ã€œ10â„ƒ                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                         â”‚ â”‚
â”‚ â”‚      [ 5.2 ] â„ƒ          â”‚ â”‚
â”‚ â”‚                         â”‚ â”‚
â”‚ â”‚   -  â”â”â”â”â”â—â”â”â”â”â”  +     â”‚ â”‚
â”‚ â”‚                         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚            â†“                â”‚
â”‚ ğŸ§Š å†·å‡åº«                   â”‚
â”‚ åŸºæº–: -25ã€œ-15â„ƒ             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                         â”‚ â”‚
â”‚ â”‚     [ -18.5 ] â„ƒ         â”‚ â”‚
â”‚ â”‚                         â”‚ â”‚
â”‚ â”‚   -  â”â”â”â”â—â”â”â”â”â”â”  +     â”‚ â”‚
â”‚ â”‚                         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚            â†“                â”‚
â”‚ ğŸ³ èª¿ç†å ´                   â”‚
â”‚ åŸºæº–: 15ã€œ25â„ƒ               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                         â”‚ â”‚
â”‚ â”‚      [ 22.0 ] â„ƒ         â”‚ â”‚
â”‚ â”‚                         â”‚ â”‚
â”‚ â”‚   -  â”â”â”â”â”â”â”â—â”â”  +      â”‚ â”‚
â”‚ â”‚                         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                             â”‚
â”‚      [ è¨˜éŒ²ã‚’ä¿å­˜ ]         â”‚
â”‚                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. ç•°å¸¸å€¤å…¥åŠ›æ™‚
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš ï¸ åŸºæº–æ¸©åº¦ã‚’è¶…ãˆã¦ã„ã¾ã™   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                             â”‚
â”‚ ğŸ§Š å†·è”µåº«A                  â”‚
â”‚ è¨˜éŒ²: 15.0â„ƒ                 â”‚
â”‚ åŸºæº–: 0ã€œ10â„ƒ  âš ï¸ è¶…é       â”‚
â”‚                             â”‚
â”‚ å¯¾å¿œå†…å®¹ã‚’è¨˜éŒ²ã—ã¦ãã ã•ã„  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ æ‰‰ã®é–‰ã‚å¿˜ã‚Œã‚’ç¢ºèªã€    â”‚ â”‚
â”‚ â”‚ é£Ÿæã¯å»ƒæ£„å‡¦åˆ†          â”‚ â”‚
â”‚ â”‚                         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                             â”‚
â”‚ [ã‚­ãƒ£ãƒ³ã‚»ãƒ«]  [è¨˜éŒ²ã™ã‚‹]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4. ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ç”»é¢ï¼ˆå±¥æ­´ï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚       2025å¹´ 1æœˆ            â”‚
â”‚  æ—¥ æœˆ ç« æ°´ æœ¨ é‡‘ åœŸ       â”‚
â”‚        1  2  3  4          â”‚
â”‚      âœ“  âœ“  âœ“  âœ“           â”‚
â”‚   5  6  7  8  9 10 11      â”‚
â”‚   âœ“  âœ“  âœ“  âœ“  âœ“  âœ“  âœ“     â”‚
â”‚  12 13 14 15 16 17 18      â”‚
â”‚   âœ“  âœ“  âœ“  â—              â”‚
â”‚  19 20 21 22 23 24 25      â”‚
â”‚                             â”‚
â”‚  26 27 28 29 30 31         â”‚
â”‚                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ“ è¨˜éŒ²å®Œäº†  âš ï¸ ç•°å¸¸ã‚ã‚Š     â”‚
â”‚ â— ä»Šæ—¥      â—‹ æœªè¨˜éŒ²       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1æœˆ15æ—¥ã®è¨˜éŒ²               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ 09:00 æœ                â”‚ â”‚
â”‚ â”‚ å†·è”µåº«A 5.2â„ƒ âœ“          â”‚ â”‚
â”‚ â”‚ å†·å‡åº« -18.5â„ƒ âœ“         â”‚ â”‚
â”‚ â”‚ èª¿ç†å ´ 22.0â„ƒ âœ“          â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5. è¨­å®šç”»é¢
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† è¨­å®š                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                             â”‚
â”‚ åº—èˆ—æƒ…å ±                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ åº—èˆ—å: æœ¬åº—            â”‚ â”‚
â”‚ â”‚ [ç·¨é›†]                  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                             â”‚
â”‚ è¨˜éŒ²ãƒã‚¤ãƒ³ãƒˆ                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ§Š å†·è”µåº«A  0ã€œ10â„ƒ      â”‚ â”‚
â”‚ â”‚ ğŸ§Š å†·å‡åº«  -25ã€œ-15â„ƒ    â”‚ â”‚
â”‚ â”‚ ğŸ³ èª¿ç†å ´  15ã€œ25â„ƒ      â”‚ â”‚
â”‚ â”‚ [+ è¿½åŠ ]                â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                             â”‚
â”‚ ãƒ—ãƒ©ãƒ³                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ç„¡æ–™ãƒ—ãƒ©ãƒ³              â”‚ â”‚
â”‚ â”‚ 1åº—èˆ—ãƒ»3ãƒã‚¤ãƒ³ãƒˆã¾ã§    â”‚ â”‚
â”‚ â”‚ [ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ã«ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰]â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                             â”‚
â”‚ ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ                  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ              â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```
ondolog/
â”œâ”€â”€ app/                          # Flutter ã‚¢ãƒ—ãƒª
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ main.dart
â”‚   â”‚   â”œâ”€â”€ app.dart
â”‚   â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”‚   â”œâ”€â”€ constants.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ theme.dart
â”‚   â”‚   â”‚   â””â”€â”€ routes.dart
â”‚   â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”‚   â”œâ”€â”€ user.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ location.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ checkpoint.dart
â”‚   â”‚   â”‚   â””â”€â”€ record.dart
â”‚   â”‚   â”œâ”€â”€ providers/
â”‚   â”‚   â”‚   â”œâ”€â”€ auth_provider.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ location_provider.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ checkpoint_provider.dart
â”‚   â”‚   â”‚   â””â”€â”€ record_provider.dart
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”œâ”€â”€ api_service.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ auth_service.dart
â”‚   â”‚   â”‚   â””â”€â”€ notification_service.dart
â”‚   â”‚   â”œâ”€â”€ screens/
â”‚   â”‚   â”‚   â”œâ”€â”€ splash_screen.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ login_screen.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ home_screen.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ record_input_screen.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ calendar_screen.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ settings_screen.dart
â”‚   â”‚   â”‚   â””â”€â”€ checkpoint_edit_screen.dart
â”‚   â”‚   â”œâ”€â”€ widgets/
â”‚   â”‚   â”‚   â”œâ”€â”€ temperature_input.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ checkpoint_card.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ record_status_badge.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ calendar_widget.dart
â”‚   â”‚   â”‚   â””â”€â”€ abnormal_dialog.dart
â”‚   â”‚   â””â”€â”€ utils/
â”‚   â”‚       â”œâ”€â”€ temperature_validator.dart
â”‚   â”‚       â””â”€â”€ date_utils.dart
â”‚   â”œâ”€â”€ pubspec.yaml
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ api/                          # Cloudflare Workers
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ users.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ locations.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ checkpoints.ts
â”‚   â”‚   â”‚   â””â”€â”€ records.ts
â”‚   â”‚   â”œâ”€â”€ middleware/
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.ts
â”‚   â”‚   â”‚   â””â”€â”€ cors.ts
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â””â”€â”€ firebase.ts
â”‚   â”‚   â””â”€â”€ utils/
â”‚   â”‚       â”œâ”€â”€ response.ts
â”‚   â”‚       â””â”€â”€ temperature.ts
â”‚   â”œâ”€â”€ wrangler.toml
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ tsconfig.json
â”‚
â””â”€â”€ README.md
```

---

## å®Ÿè£…æ‰‹é †

### Phase 1: ç’°å¢ƒæ§‹ç¯‰ï¼ˆDay 3 åˆå‰ï¼‰

1. Flutter ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
```bash
flutter create --org com.ondolog ondolog
cd ondolog
```

2. å¿…è¦ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸è¿½åŠ  (pubspec.yaml)
```yaml
dependencies:
  flutter:
    sdk: flutter
  flutter_riverpod: ^2.4.9
  firebase_core: ^2.24.2
  firebase_auth: ^4.16.0
  google_sign_in: ^6.2.1
  dio: ^5.4.0
  hive: ^2.2.3
  hive_flutter: ^1.1.0
  table_calendar: ^3.0.9
  fl_chart: ^0.66.2
  intl: ^0.18.1
  go_router: ^13.1.0

dev_dependencies:
  flutter_test:
    sdk: flutter
  build_runner: ^2.4.8
  hive_generator: ^2.0.1
```

3. Cloudflare Workers ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
```bash
mkdir api && cd api
npm init -y
npm install wrangler typescript @cloudflare/workers-types hono firebase-admin
```

### Phase 2: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å®Ÿè£…ï¼ˆDay 3 åˆå¾Œï¼‰

1. D1 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä½œæˆãƒ»ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
2. Workers API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå®Ÿè£…
3. Firebase Auth é€£æº
4. æ¸©åº¦åŸºæº–åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯

### Phase 3: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…ï¼ˆDay 4ï¼‰

1. èªè¨¼ãƒ•ãƒ­ãƒ¼ï¼ˆãƒ­ã‚°ã‚¤ãƒ³/ç™»éŒ²ï¼‰
2. ãƒ›ãƒ¼ãƒ ç”»é¢ï¼ˆä»Šæ—¥ã®è¨˜éŒ²çŠ¶æ³ï¼‰
3. æ¸©åº¦å…¥åŠ›ç”»é¢ï¼ˆã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ + æ•°å€¤å…¥åŠ›ï¼‰
4. ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ç”»é¢
5. è¨­å®šç”»é¢ï¼ˆè¨˜éŒ²ãƒã‚¤ãƒ³ãƒˆç®¡ç†ï¼‰

### Phase 4: çµ±åˆãƒ»ãƒ†ã‚¹ãƒˆï¼ˆDay 4 å¤œï¼‰

1. APIé€£æºç¢ºèª
2. ç•°å¸¸å€¤æ¤œçŸ¥ãƒ»è¡¨ç¤ºç¢ºèª
3. ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼è¡¨ç¤ºç¢ºèª
4. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

---

## MVPåˆ¶é™äº‹é …

| é …ç›® | ç„¡æ–™ãƒ—ãƒ©ãƒ³åˆ¶é™ |
|------|---------------|
| åº—èˆ—æ•° | 1åº—èˆ— |
| è¨˜éŒ²ãƒã‚¤ãƒ³ãƒˆ | 3ç®‡æ‰€ã¾ã§ |
| è¨˜éŒ²å›æ•° | 1æ—¥2å›ã¾ã§ |
| ãƒ‡ãƒ¼ã‚¿ä¿å­˜æœŸé–“ | 1å¹´ |
| å¸³ç¥¨å‡ºåŠ› | ä¸å¯ |
| ã‚¢ãƒ©ãƒ¼ãƒˆé€šçŸ¥ | ä¸å¯ |

åˆ¶é™ãƒã‚§ãƒƒã‚¯ã¯ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ + ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ä¸¡æ–¹ã§å®Ÿè£…

---

## æ¸©åº¦å…¥åŠ›UIä»•æ§˜

### ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ä»•æ§˜
- æœ€å°å€¤: -30â„ƒ
- æœ€å¤§å€¤: +50â„ƒ
- ã‚¹ãƒ†ãƒƒãƒ—: 0.1â„ƒ
- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: è¨˜éŒ²ãƒã‚¤ãƒ³ãƒˆã‚¿ã‚¤ãƒ—ã«å¿œã˜ãŸä¸­å¤®å€¤

### æ•°å€¤å…¥åŠ›
- å°æ•°ç‚¹ç¬¬1ä½ã¾ã§
- ãƒã‚¤ãƒŠã‚¹å…¥åŠ›å¯¾å¿œ
- ç¯„å›²å¤–ã¯ã‚¨ãƒ©ãƒ¼è¡¨ç¤º

### ç•°å¸¸å€¤åˆ¤å®š
```dart
bool isAbnormal(double temp, Checkpoint cp) {
  if (cp.minTemp != null && temp < cp.minTemp) return true;
  if (cp.maxTemp != null && temp > cp.maxTemp) return true;
  return false;
}
```

---

## æ³¨æ„äº‹é …

1. **HACCPå¯¾å¿œ**
   - è¨˜éŒ²æ—¥æ™‚ã¯è‡ªå‹•ä»˜ä¸ï¼ˆæ”¹ã–ã‚“é˜²æ­¢ï¼‰
   - éå»ã®è¨˜éŒ²ã¯ç·¨é›†ä¸å¯ï¼ˆè¿½è¨˜ã®ã¿ï¼‰

2. **ç•°å¸¸å€¤å¯¾å¿œ**
   - åŸºæº–å¤–ã®å ´åˆã¯å¿…ãšå¯¾å¿œå†…å®¹ã‚’è¨˜éŒ²
   - ç•°å¸¸è¨˜éŒ²ã¯ç›®ç«‹ã¤è¡¨ç¤º

3. **ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œ**
   - Hiveã«ãƒ­ãƒ¼ã‚«ãƒ«ä¿å­˜
   - ã‚ªãƒ³ãƒ©ã‚¤ãƒ³å¾©å¸°æ™‚ã«åŒæœŸ

4. **è¨˜éŒ²ãƒªãƒã‚¤ãƒ³ãƒ‰ï¼ˆv1.1ï¼‰**
   - æœ9æ™‚ã€å¤•æ–¹17æ™‚ã«é€šçŸ¥
   - æœªè¨˜éŒ²ã®å ´åˆã®ã¿

---

## ãƒ‡ãƒ—ãƒ­ã‚¤

### Cloudflare Workers
```bash
cd api
npx wrangler deploy
```

### Flutter App
```bash
# Android
flutter build appbundle --release

# iOS
flutter build ios --release
```

---

## æˆåŠŸåŸºæº–

- [ ] ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²/ãƒ­ã‚°ã‚¤ãƒ³ã§ãã‚‹
- [ ] è¨˜éŒ²ãƒã‚¤ãƒ³ãƒˆã‚’è¨­å®šã§ãã‚‹
- [ ] æ¸©åº¦ã‚’è¨˜éŒ²ã§ãã‚‹
- [ ] ç•°å¸¸å€¤ãŒæ¤œçŸ¥ãƒ»è¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã§å±¥æ­´ç¢ºèªã§ãã‚‹
- [ ] 3ãƒã‚¤ãƒ³ãƒˆåˆ¶é™ãŒæ©Ÿèƒ½ã™ã‚‹
- [ ] ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã§é–²è¦§ã§ãã‚‹
